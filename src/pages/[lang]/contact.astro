---
import BaseLayout from '@layouts/BaseLayout.astro';
import { useTranslations, type Lang } from '@i18n/ui';

export async function getStaticPaths() {
  return [
    { params: { lang: 'en' } },
    { params: { lang: 'zh' } },
  ];
}

const { lang } = Astro.params as { lang: Lang };
const t = useTranslations(lang);

const title = lang === 'en' ? 'Contact - Research Lab' : '联系方式 - 研究实验室';
const description = lang === 'en' 
  ? 'Contact information'
  : '联系方式';
---

<BaseLayout lang={lang} title={title} description={description} currentPath={`/${lang}/contact/`}>
  <div class="container">
    <h1 class="section-title">{t('contact.title')}</h1>
    
    <div class="contact-content">
      <div class="contact-info">
        <div class="contact-item">
          <h3>{t('contact.email')}</h3>
          <p>
            <a href="mailto:your.email@example.com" id="email-link">your.email@example.com</a>
            <button id="copy-email" class="btn-copy" title={t('contact.copy')}>
              <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect>
                <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path>
              </svg>
            </button>
          </p>
        </div>
        
        <div class="contact-item">
          <h3>{t('contact.address')}</h3>
          <p>{lang === 'en' ? 'Your Institution Address' : '你的机构地址'}</p>
        </div>
        
        <div class="contact-item">
          <h3>{lang === 'en' ? 'Social Links' : '社交链接'}</h3>
          <div class="social-links">
            <a href="https://github.com" target="_blank" rel="noopener noreferrer" aria-label="GitHub">
              <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22"></path>
              </svg>
            </a>
            <a href="https://scholar.google.com" target="_blank" rel="noopener noreferrer" aria-label="Google Scholar">
              <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                <path d="M5.242 13.769L0 9.5 12 0l12 9.5-5.242 4.269C17.548 11.249 14.978 9.5 12 9.5c-2.977 0-5.548 1.748-6.758 4.269zM12 10a7 7 0 1 0 0 14 7 7 0 0 0 0-14z"/>
              </svg>
            </a>
            <a href="https://twitter.com" target="_blank" rel="noopener noreferrer" aria-label="Twitter/X">
              <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M22 4s-.7 2.1-2 3.4c1.6 10-9.4 17.3-18 11.6 2.2.1 4.4-.6 6-2C3 15.5.5 9.6 3 5c2.2 2.6 5.6 4.1 9 4-.9-4.2 4-6.6 7-3.8 1.1 0 3-1.2 3-1.2z"></path>
              </svg>
            </a>
          </div>
        </div>
      </div>
    </div>
  </div>
</BaseLayout>

<script>
  const copyButton = document.getElementById('copy-email');
  const emailLink = document.getElementById('email-link');
  const email = emailLink?.textContent || '';
  
  copyButton?.addEventListener('click', async () => {
    try {
      await navigator.clipboard.writeText(email);
      const originalTitle = copyButton.title;
      copyButton.title = `{lang === "en" ? "Copied!" : "已复制！"}`;
      copyButton.style.color = 'var(--color-accent)';
      
      setTimeout(() => {
        copyButton.title = originalTitle;
        copyButton.style.color = '';
      }, 2000);
    } catch (err) {
      console.error('Failed to copy:', err);
    }
  });
</script>

<style>
  .contact-content {
    max-width: 800px;
  }
  
  .contact-item {
    margin-bottom: 2.5rem;
  }
  
  .contact-item h3 {
    font-size: 1.25rem;
    font-weight: 600;
    margin-bottom: 0.75rem;
    color: var(--color-text);
  }
  
  .contact-item p {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    color: var(--color-text-secondary);
  }
  
  .btn-copy {
    background: none;
    border: none;
    cursor: pointer;
    padding: 0.25rem;
    color: var(--color-text-secondary);
    transition: color 0.2s ease;
    display: flex;
    align-items: center;
  }
  
  .btn-copy:hover {
    color: var(--color-accent);
  }
  
  .social-links {
    display: flex;
    gap: 1rem;
    margin-top: 0.5rem;
  }
  
  .social-links a {
    color: var(--color-text-secondary);
    transition: color 0.2s ease, transform 0.2s ease;
  }
  
  .social-links a:hover {
    color: var(--color-accent);
    transform: translateY(-2px);
  }
</style>

